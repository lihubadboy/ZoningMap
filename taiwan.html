<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
	<style type="text/css">
		body, html,#allmap {width: 100%;height: 100%;overflow: hidden;margin:0;font-family:"微软雅黑";}
	</style>
	<script src="lib/jquery-2.1.1.min.js" type="text/javascript"></script>
	<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=GGvhGfDF6GyuDoE1l2MFkzVC"></script>
	<title>峰值加速度</title>
</head>
<body>
	<div id="allmap"></div>
</body>
</html>
<script type="text/javascript">
	var data = {
		"points": [{
			"x": 120.54,
			"y": 22.93,
			"value": "震中"
		}, {
			"x": 120.43,
			"y": 22.82,
			"value": 87.93
	}, {
			"x": 120.59,
			"y": 23.08,
			"value": 104.86
	}, {
			"x": 120.64,
			"y": 22.74,
			"value": 105.46
	}, {
			"x": 120.5,
			"y": 22.72,
			"value": 61.97
	}, {
			"x": 120.5,
			"y": 22.68,
			"value": 35.47
	}, {
			"x": 120.53,
			"y": 23.19,
			"value": 147.45
	}, {
			"x": 120.24,
			"y": 23.04,
			"value": 148.34
	}, {
			"x": 120.29,
			"y": 23.14,
			"value": 229.04
	}, {
			"x": 120.21,
			"y": 22.99,
			"value": 233.82
	}, {
			"x": 120.5,
			"y": 23.26,
			"value": 66.82
	}, {
			"x": 120.2,
			"y": 23.17,
			"value": 232.93
	}, {
			"x": 120.32,
			"y": 22.57,
			"value": 33.68
	}, {
			"x": 120.59,
			"y": 23.35,
			"value": 104.68
	}, {
			"x": 120.09,
			"y": 23.15,
			"value": 163.18
	}, {
			"x": 120.96,
			"y": 22.6,
			"value": 21.95
	}, {
			"x": 121.08,
			"y": 22.82,
			"value": 22.73
	}, {
			"x": 121.09,
			"y": 22.86,
			"value": 32.36
	}, {
			"x": 121.03,
			"y": 23.19,
			"value": 15.25
	}, {
			"x": 120.63,
			"y": 22.37,
			"value": 16.51
	}, {
			"x": 120.43,
			"y": 23.5,
			"value": 171.37
	}, {
			"x": 121.15,
			"y": 22.75,
			"value": 17.41
	}, {
			"x": 120.37,
			"y": 22.35,
			"value": 19.32
	}, {
			"x": 120.86,
			"y": 22.38,
			"value": 10.35
	}, {
			"x": 120.24,
			"y": 23.48,
			"value": 190.81
	}, {
			"x": 120.81,
			"y": 23.51,
			"value": 84.04
	}, {
			"x": 121.22,
			"y": 23.1,
			"value": 22.55
	}, {
			"x": 120.9,
			"y": 22.36,
			"value": 6.4
	}, {
			"x": 120.68,
			"y": 23.6,
			"value": 344.12
	}, {
			"x": 121.3,
			"y": 22.97,
			"value": 17.65
	}, {
			"x": 120.57,
			"y": 23.68,
			"value": 109.46
	}, {
			"x": 120.23,
			"y": 23.64,
			"value": 164.67
	}, {
			"x": 120.54,
			"y": 23.72,
			"value": 75.37
	}, {
			"x": 121.37,
			"y": 23.1,
			"value": 14.3
	}, {
			"x": 121.31,
			"y": 23.35,
			"value": 5.2
	}, {
			"x": 119.67,
			"y": 23.26,
			"value": 60.41
	}, {
			"x": 120.62,
			"y": 23.81,
			"value": 57.6
	}, {
			"x": 121.47,
			"y": 22.67,
			"value": 2.57
	}, {
			"x": 121.45,
			"y": 23.32,
			"value": 17.47
	}, {
			"x": 121.33,
			"y": 23.5,
			"value": 13.34
	}, {
			"x": 120.75,
			"y": 22,
			"value": 14.48
	}, {
			"x": 120.69,
			"y": 23.88,
			"value": 28.29
	}, {
			"x": 120.29,
			"y": 23.86,
			"value": 54.91
	}, {
			"x": 120.75,
			"y": 21.96,
			"value": 9.99
	}, {
			"x": 120.68,
			"y": 23.91,
			"value": 15.13
	}, {
			"x": 120.91,
			"y": 23.88,
			"value": 46.06
	}, {
			"x": 120.81,
			"y": 21.94,
			"value": 2.69
	}, {
			"x": 120.87,
			"y": 23.91,
			"value": 13.4
	}, {
			"x": 120.58,
			"y": 23.96,
			"value": 29.37
	}, {
			"x": 120.86,
			"y": 21.9,
			"value": 5.44
	}, {
			"x": 119.56,
			"y": 23.57,
			"value": 33.74
	}, {
			"x": 120.7,
			"y": 24.04,
			"value": 26.62
	}, {
			"x": 120.96,
			"y": 24.01,
			"value": 6.94
	}, {
			"x": 121.48,
			"y": 23.68,
			"value": 16.45
	}, {
			"x": 120.56,
			"y": 24.08,
			"value": 41.09
	}, {
			"x": 120.56,
			"y": 24.13,
			"value": 25.9
	}, {
			"x": 121.44,
			"y": 23.81,
			"value": 6.82
	}, {
			"x": 120.68,
			"y": 24.15,
			"value": 10.65
	}, {
			"x": 121.56,
			"y": 22.04,
			"value": 5.8
	}, {
			"x": 121.51,
			"y": 23.87,
			"value": 14.12
	}, {
			"x": 120.83,
			"y": 24.26,
			"value": 14.6
	}, {
			"x": 121.09,
			"y": 24.74,
			"value": 6.94
	}
	]};

	var center = {
		"x": 120.54,
	    "y": 22.93,
		"value": "震中" 
	};

	// 百度地图API功能
	var map = new BMap.Map("allmap");
	// map.centerAndZoom(new BMap.Point(data.points[0].x, data.points[0].y), 9);
    map.addControl(new BMap.NavigationControl());
    map.addControl(new BMap.ScaleControl());
    map.addControl(new BMap.OverviewMapControl());
    map.enableScrollWheelZoom();
    map.addControl(new BMap.MapTypeControl());

    function addPoints(color){
    	//animation point
    	var point = new BMap.Point(center.x, center.y);
		map.centerAndZoom(point, 9);
		var marker = new BMap.Marker(point);
		map.addOverlay(marker);
		marker.setAnimation(BMAP_ANIMATION_BOUNCE);

		//points
		$.each(data.points, function(key, val){
			var opts = {
	  			position : new BMap.Point(val.x, val.y),
	  			offset   : new BMap.Size(10, -10)
		};
		var label = new BMap.Label(val.value, opts);
		label.setStyle({
			 color : color,
			 fontSize : "12px",
			 height : "20px",
			 lineHeight : "20px",
			 fontFamily:"微软雅黑",
			 backgroundColor: "transparent",
			 border: "0"
		 });
		map.addOverlay(label);   
	});
    }

	map.addEventListener("maptypechange", function(e){
		map.clearOverlays();
		if(e.Hb.af == '地图')
			addPoints("red");
		else
			addPoints("white");
	});

	addPoints("red");
</script>